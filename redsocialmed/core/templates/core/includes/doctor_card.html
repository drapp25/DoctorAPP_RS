{% load static %}
<div class="post-card" style="margin-bottom: 20px;">
    <div class="post-header">
        <div class="post-author">
            {% if doctor.foto_perfil %}
            <img src="{{ doctor.foto_perfil.url }}" alt="Foto Doctor" class="post-author-img">
            {% else %}
            <div class="post-author-img"
                style="background: #eee; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                <img src="{% static 'core/img/user_default.png' %}"
                    style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            {% endif %}
            <div class="post-author-info">
                <h4 style="color: white;">
                    {% if doctor.es_profesional %}{{ doctor.titulo_profesional|default:"Dr." }} {% endif %}
                    {{ doctor.first_name }} {{ doctor.last_name }}
                </h4>
                <!-- Removed username/email display -->
            </div>
        </div>

        {% if doctor.es_profesional %}
        <div class="post-tag">
            <i class="fas fa-user-md"></i>
            <span>
                {% if doctor.especialidad %}
                {{ doctor.especialidad }}
                {% else %}
                Profesional
                {% endif %}
            </span>
        </div>
        {% else %}
        <div class="post-tag" style="background: rgba(255,255,255,0.1);">
            <i class="fas fa-user"></i>
            <span>Paciente</span>
        </div>
        {% endif %}
    </div>

    <div class="post-body" style="padding: 20px; flex-direction: column; gap: 10px;">
        <div class="post-content-text">
            <h3 class="post-title" style="margin-bottom: 5px; color: #333;">
                {{ doctor.first_name }} {{ doctor.last_name }}
            </h3>
            {% if doctor.bio %}
            <p class="post-excerpt">
                {{ doctor.bio|truncatechars:150 }}
            </p>
            {% else %}
            <p class="post-excerpt" style="font-style: italic; color: #ccc;">
                Sin biograf√≠a disponible.
            </p>
            {% endif %}
        </div>

        <div style="text-align: right;">
            <a href="{% url 'perfil' doctor.id %}" class="btn-seguir"
                style="display: inline-block; padding: 8px 20px; background: #2981b6; color: white; border-radius: 20px; text-decoration: none; font-weight: bold; font-size: 0.9rem; transition: background 0.2s;">
                Ver Perfil
            </a>
        </div>
    </div>
</div>